name: Close Stale Issues and PRs

on:
  schedule:
    - cron: '30 1 * * *'
  workflow_dispatch:

jobs:
  stale:
    runs-on: ubuntu-latest
    permissions:
      issues: write
      pull-requests: write
    steps:
      - uses: actions/stale@5bef64f19d7facfb25b37b414482c7164d639639 # v9.1.0
        with:
          stale-issue-message: >
            This issue has been automatically marked as stale because it has been
            open for 300 days with no activity. It will be closed in 60 days if
            no further activity occurs. Remove the stale label or comment to keep it open.
          stale-pr-message: >
            This PR has been automatically marked as stale because it has been
            open for 300 days with no activity. It will be closed in 60 days if
            no further activity occurs. Remove the stale label or comment to keep it open.
          close-issue-message: 'Closed due to inactivity. Feel free to reopen if still relevant.'
          close-pr-message: 'Closed due to inactivity. Feel free to reopen if still relevant.'
          days-before-issue-stale: 300
          days-before-pr-stale: 300
          days-before-issue-close: 60
          days-before-pr-close: 60
          stale-issue-label: stale
          stale-pr-label: stale
          exempt-issue-labels: 'pinned,security,bug'
          exempt-pr-labels: 'pinned,security'
